(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"00d3":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex min-height-inherit"},[t.inline?t._e():o("div",{staticClass:"min-height-inherit position-relative workspace-toolbox",class:{blocklyToolboxDelete:!!t.blockBeingDragged},staticStyle:{flex:"0 0 auto"},on:{mouseenter:function(e){t.isMouseInQuasarToolbox=!0},mouseleave:function(e){t.isMouseInQuasarToolbox=!1}}},[o("div",{staticClass:"q-pa-sm flex column"},[o("q-list",[t._l(t.toolbox,(function(e){return["sep"===e.tag?o("q-separator"):o("q-item",{style:"color:"+e.colour,attrs:{clickable:"",active:t.isFlyoutOpen&&t.isFlyoutOpen===e.name},on:{click:function(o){return t.showToolboxFlyout(e,o)}}},[o("q-item-section",{attrs:{avatar:""}},[o("q-icon",{style:"color:"+e.colour,attrs:{name:e.icon}})],1),o("q-item-section",{staticClass:"gt-sm"},[o("q-item-label",{style:"color:"+e.colour},[t._v(t._s(e.name))])],1)],1)]}))],2),o("q-list",{staticStyle:{flex:"0 0 auto"}},[t._t("default")],2)],1)]),o("div",{staticClass:"min-height-inherit position-relative",on:{click:t.closeToolboxFLyout}},[o("div",{staticClass:"blockly",class:{"blockly-inline":t.inline},staticStyle:{"min-height":"inherit"}},[o("div",{ref:"blockly",staticClass:"blockly-wrap"}),o("xml",{ref:"toolbox",staticStyle:{display:"none"}},[t._l(t.toolbox,(function(e){return[o(e.tag,{tag:"component",attrs:{name:e.name,colour:e.colour,custom:e.custom}},[t._l(e.children,(function(e){return[o(e.tag,{tag:"component",attrs:{type:e.type,colour:e.colour}},[t._l(e.children,(function(e){return[o(e.tag,{tag:"component",attrs:{id:e.id,op:e.op,at:e.at,items:e.items,statement:e.statement,mode:e.mode,at1:e.at1,at2:e.at2,divisor_input:e.divisor_input,name:e.name,colour:e.colour}},[t._v(t._s(e.value)),t._l(e.children,(function(e){return[o(e.tag,{tag:"component",attrs:{type:e.type,name:e.name}},[t._v(t._s(e.value)),t._l(e.children,(function(e){return[o(e.tag,{tag:"component",attrs:{name:e.name}},[t._v(t._s(e.value))])]}))],2)]}))],2)]}))],2)]}))],2)]}))],2)],1)])])},r=[],a=(o("ddb0"),o("ded3")),s=o.n(a),l=o("54ca"),i=o.n(l),c=o("2f62"),u="/**\r\n * IMPORTANT NOTE\r\n * This project MUST be ES5 compliant as that is what the JS Interpreter uses\r\n */\r\n\r\n/**\r\n * Simple tests\r\n */\r\nhasNumber = /\\d/\r\n \r\n/**\r\n * Stores events being listened to\r\n * {eventName: [...callbacks]}\r\n */\r\n_events = {}\r\n\r\n/**\r\n * console.log helper to properly send data to main app w/o obfuscation\r\n */\r\nconsole = {\r\n  log: function (arguments) {\r\n    log(JSON.stringify(arguments))\r\n  }\r\n}\r\n\r\n/**\r\n * target.addEventListener subsitution\r\n * @param {String} eventName The eventName to store this callback under\r\n * @param {Array} args The list of arguments\r\n * @param {Function} callback The function to call when this event is triggered\r\n */\r\naddEventListener = function (eventName, args, callback) {\r\n  if (!_events[eventName]) {\r\n    _events[eventName] = []\r\n  }\r\n\r\n  _events[eventName].push({\r\n    args: args,\r\n    callback: callback\r\n  })\r\n}\r\n\r\n/**\r\n * Trigger an event\r\n * @param {String} eventName \r\n * @param {*} payload\r\n */\r\ntriggerEvent = function (eventName, payload) {\r\n  _events[eventName] && _events[eventName].forEach(function (event) {\r\n    event.callback({\r\n      args: event.args,\r\n      payload: JSON.parse(payload)\r\n    })\r\n  })\r\n}\r\n\r\n/**\r\n * Plays a note\r\n */\r\nplayNote = function (payload) {\r\n  _playNote(JSON.stringify(payload))\r\n}\r\n\r\n/**\r\n * Compre helper for working with \"is\", \"is not\", etc\r\n */\r\ncompare = function (a, compare, b) {\r\n  switch (compare) {\r\n    case 'is':\r\n      return a == b\r\n    case 'is not':\r\n      return a != b\r\n  }\r\n}\r\n\r\n/**\r\n * Checks if a string belongs to the \"is any\" family (\"all\", \"any\", etc)\r\n */\r\nisAny = function (str) {\r\n  var list = ['any', 'all']\r\n  var isValid = false\r\n\r\n  list.forEach(function (item) {\r\n    if (str === item) isValid = true\r\n  });\r\n\r\n  return isValid\r\n}\r\n\r\n/**\r\n * Checks if a given note matches a webmidi.name\r\n * - If no octave present, then matches the key in any octave\r\n */\r\nisNote = function (a, compare, b) {\r\n  switch (compare) {\r\n    case 'is':\r\n      if (hasNumber.test()) {\r\n        return a == b.name.concat(b.octave)\r\n      } else {\r\n        return a == b.name\r\n      }\r\n\r\n    case 'is not':\r\n      if (hasNumber.test()) {\r\n        return a != b.name.concat(b.octave)\r\n      } else {\r\n        return a != b.name\r\n      }\r\n  }\r\n}",p=o("c62b"),m=o.n(p),h=o("2ef0"),d=o("7724"),b=o.n(d),y=i.a.Theme.defineTheme("midiblocks",{blockStyles:{logic_blocks:{colourPrimary:"#5d37f0",colourSecondary:"#635697",colourTertiary:"#453974"},loop_blocks:{colourPrimary:"#2ca300",colourSecondary:"#328514",colourTertiary:"#2d621a"},math_blocks:{colourPrimary:"#a599e9",colourSecondary:"#7e77a9",colourTertiary:"#575467"},procedure_blocks:{colourPrimary:"#ff628c",colourSecondary:"#b56278",colourTertiary:"#6e3c49"},variable_blocks:{colourPrimary:"#ff628c",colourSecondary:"#b56278",colourTertiary:"#6e3c49"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}}}),g=o("3e52"),f={name:"Blockly",props:["options","toolbox","blocks","inline"],computed:s()({},Object(c["b"])(["devices"])),data(){return{blockly:null,interpreter:null,isFlyoutOpen:!1,blockBeingDragged:!1,lastClickedCategory:null,isMouseInQuasarToolbox:!1}},mounted(){let t=this.$props.options||{};t=Object(h["defaults"])(this.$props.options,{renderer:"zelos",sounds:!1,toolbox:this.$refs.toolbox,media:"media/",zoom:{controls:!0,pinch:!0,wheel:!0,startScale:.8},grid:{spacing:50,length:50,colour:"#9effff",snap:!0},theme:y}),this.blockly=i.a.inject(this.$refs.blockly,t),this.blockly.addChangeListener(this.onChange),this.$root.$on("blockly.prompt.submit",this.onPromptSubmit),this.addBlocks()},beforeDestroy(){this.$root.$off("blockly.prompt.submit",this.onPromptSubmit)},methods:{onChange(t){this.$emit("change",t),"dragStart"===t.element?this.blockBeingDragged=t:"dragStop"===t.element&&(this.isMouseInQuasarToolbox&&this.blockly.getBlockById(t.blockId).dispose(),this.blockBeingDragged=!1)},showToolboxFlyout(t,e){let o=[];t.custom?this.blockly.getFlyout().show(t.custom):(t.children.forEach(t=>{o.push(document.querySelector(`block[type="${t.type}"]`))}),this.blockly.getFlyout().show(o)),this.isFlyoutOpen=t.name,this.lastClickedCategory=e.target},onPromptSubmit(t){this.lastClickedCategory&&this.lastClickedCategory.click()},closeToolboxFLyout(t){let e=t.path.some(t=>t.classList&&t.classList.contains("blocklyFlyoutBackground"));this.isFlyoutOpen&&!e&&(this.blockly.getFlyout().hide(),this.isFlyoutOpen=!1)},run(){const t=i.a.JavaScript.workspaceToCode(this.blockly);this.interpreter=new b.a(g["transform"](u+"\n"+t,{presets:["env"],sourceType:"script"}).code,this.setupInterpreter),this.interpreter.run()},setupInterpreter(t,e){t.setProperty(e,"log",t.createNativeFunction(t=>{console.log("ðŸ“¦ log: ",...JSON.parse(t))})),t.setProperty(e,"_playNote",t.createNativeFunction(t=>{let e=JSON.parse(t);"all"===e.device&&Object.keys(this.devices.outputs).forEach(t=>{const o=m.a.getOutputById(t);o.playNote(e.note,e.channel)})}))},addBlocks(){this.blocks.forEach(t=>{i.a.Blocks[t.title]={init:function(){this.jsonInit(JSON.parse(t.block_definition))}},i.a.JavaScript[t.title]=()=>"";const e=this.blockly.newBlock(t.title);e.initSvg(),e.render(),this.blockly.centerOnBlock(e.id),this.blockly.scroll(this.blockly.scrollX,this.blockly.scrollY)})}}},k=f,v=(o("8f13"),o("2877")),_=o("1c1c"),S=o("eb85"),C=o("66e5"),T=o("4074"),N=o("0016"),w=o("0170"),x=o("eebe"),F=o.n(x),O=Object(v["a"])(k,n,r,!1,null,null,null);e["a"]=O.exports;F()(O,"components",{QList:_["a"],QSeparator:S["a"],QItem:C["a"],QItemSection:T["a"],QIcon:N["a"],QItemLabel:w["a"]})},"730a":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"full-height"},[o("section",{staticClass:"content"},[o("h1",[t._v("Library")]),t.post.isChecking?o("div",{staticClass:"center-children"},[o("q-spinner",{attrs:{color:"primary",size:"5em"}})],1):o("div",{domProps:{innerHTML:t._s(t.post.content)}}),[o("div",{staticClass:"row q-col-gutter-md"},t._l(t.blocks,(function(e){return o("div",{key:e.title,staticClass:"col-12 col-sm-6 col-lg-4"},[o("q-card",[o("q-card-section",[o("Workspace",{staticStyle:{right:"0"},attrs:{options:t.options,blocks:[e],inline:!0,toolbox:t.toolbox}})],1),o("q-separator"),o("q-card-section",[o("h3",[t._v(t._s(e.title))]),o("p",[t._v(t._s(e.short_description[0]))])])],1)],1)})),0)]],2)])},r=[],a=o("ded3"),s=o.n(a),l=o("00d3"),i=o("2f62"),c={name:"LibraryHome",components:{Workspace:l["a"]},computed:s()(s()({},Object(i["b"])(["post"])),{},{toolbox(){let t=[];return this.blocks.forEach(e=>{t.push({tag:"category",name:"Readonly",colour:"#fff",children:[{tag:"block",type:e.type}]})}),t}}),data(){return{blocks:[],options:{trashcan:!1,zoom:{controls:!1,pinch:!0,wheel:!0,startScale:.75}}}},mounted(){this.$store.dispatch("apiGet","library").then(t=>{this.blocks=t.data.blocks}).catch(t=>{this.$root.$emit("error",t)})}},u=c,p=o("2877"),m=o("9989"),h=o("0d59"),d=o("f09f"),b=o("a370"),y=o("eb85"),g=o("eebe"),f=o.n(g),k=Object(p["a"])(u,n,r,!1,null,null,null);e["default"]=k.exports;f()(k,"components",{QPage:m["a"],QSpinner:h["a"],QCard:d["a"],QCardSection:b["a"],QSeparator:y["a"]})},"8f13":function(t,e,o){"use strict";var n=o("c80c"),r=o.n(n);r.a},c80c:function(t,e,o){}}]);