(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"00d3":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex min-height-inherit"},[t.inline?t._e():n("div",{staticClass:"min-height-inherit position-relative workspace-toolbox",class:{blocklyToolboxDelete:!!t.blockBeingDragged},staticStyle:{flex:"0 0 auto"},on:{mouseenter:function(e){t.isMouseInQuasarToolbox=!0},mouseleave:function(e){t.isMouseInQuasarToolbox=!1}}},[n("div",{staticClass:"q-pa-sm flex column"},[n("q-list",[t._l(t.toolbox,(function(e){return["sep"===e.tag?n("q-separator"):n("q-item",{style:"color:"+e.colour,attrs:{clickable:"",active:t.isFlyoutOpen&&t.isFlyoutOpen===e.name},on:{click:function(n){return t.toggleToolboxFlyout(e,n)}}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{style:"color:"+e.colour,attrs:{name:e.icon}})],1),n("q-item-section",{staticClass:"gt-sm"},[n("q-item-label",{style:"color:"+e.colour},[t._v(t._s(e.name))])],1)],1)]}))],2),n("q-list",{staticStyle:{flex:"0 0 auto"},attrs:{dense:""}},[t._t("default")],2)],1)]),n("div",{staticClass:"min-height-inherit position-relative",on:{click:t.closeToolboxFLyout}},[n("div",{staticClass:"blockly",class:{"blockly-inline":t.inline},staticStyle:{"min-height":"inherit"}},[n("div",{ref:"blockly",staticClass:"blockly-wrap"}),n("xml",{ref:"toolbox",staticStyle:{display:"none"}},[t._l(t.toolbox,(function(e){return[n(e.tag,{tag:"component",attrs:{name:e.name,colour:e.colour,custom:e.custom}},[t._l(e.children,(function(e){return[n(e.tag,{tag:"component",attrs:{type:e.type,colour:e.colour}},[t._l(e.children,(function(e){return[n(e.tag,{tag:"component",attrs:{id:e.id,op:e.op,at:e.at,items:e.items,statement:e.statement,mode:e.mode,at1:e.at1,at2:e.at2,divisor_input:e.divisor_input,name:e.name,colour:e.colour}},[t._v(t._s(e.value)),t._l(e.children,(function(e){return[n(e.tag,{tag:"component",attrs:{type:e.type,name:e.name}},[t._v(t._s(e.value)),t._l(e.children,(function(e){return[n(e.tag,{tag:"component",attrs:{name:e.name}},[t._v(t._s(e.value))])]}))],2)]}))],2)]}))],2)]}))],2)]}))],2)],1)])])},r=[],a=(n("ddb0"),n("ded3")),s=n.n(a),l=n("54ca"),i=n.n(l),c=n("2f62"),u="/**\r\n * Simple tests\r\n */\r\nhasNumber = /\\d/\r\n \r\n/**\r\n * Stores events being listened to\r\n * {eventName: [...callbacks]}\r\n */\r\n_events = {}\r\n\r\n/**\r\n * console.log helper to properly send data to main app w/o obfuscation\r\n */\r\nconsole = {\r\n  log: function (arguments) {\r\n    log(JSON.stringify(arguments))\r\n  }\r\n}\r\n\r\n/**\r\n * target.addEventListener subsitution\r\n * @param {String} eventName The eventName to store this callback under\r\n * @param {Array} args The list of arguments\r\n * @param {Function} callback The function to call when this event is triggered\r\n */\r\naddEventListener = function (eventName, args, callback) {\r\n  if (!_events[eventName]) {\r\n    _events[eventName] = []\r\n  }\r\n\r\n  _events[eventName].push({\r\n    args: args,\r\n    callback: callback\r\n  })\r\n}\r\n\r\n/**\r\n * Trigger an event\r\n * @param {String} eventName \r\n * @param {*} payload\r\n */\r\ntriggerEvent = function (eventName, payload) {\r\n  _events[eventName] && _events[eventName].forEach(function (event) {\r\n    event.callback({\r\n      args: event.args,\r\n      payload: JSON.parse(payload)\r\n    })\r\n  })\r\n}\r\n\r\n/**\r\n * Plays a note\r\n */\r\nplayNote = function (payload) {\r\n  _playNote(JSON.stringify(payload))\r\n}\r\n\r\n/**\r\n * Compre helper for working with \"is\", \"is not\", etc\r\n */\r\ncompare = function (a, compare, b) {\r\n  switch (compare) {\r\n    case 'is':\r\n      return a == b\r\n    case 'is not':\r\n      return a != b\r\n  }\r\n}\r\n\r\n/**\r\n * Checks if a string belongs to the \"is any\" family (\"all\", \"any\", etc)\r\n */\r\nisAny = function (str) {\r\n  var list = ['any', 'all']\r\n  var isValid = false\r\n\r\n  list.forEach(function (item) {\r\n    if (str === item) isValid = true\r\n  });\r\n\r\n  return isValid\r\n}\r\n\r\n/**\r\n * Checks if a given note matches a webmidi.name\r\n * - If no octave present, then matches the key in any octave\r\n */\r\nisNote = function (a, compare, b) {\r\n  switch (compare) {\r\n    case 'is':\r\n      if (hasNumber.test()) {\r\n        return a == b.name.concat(b.octave)\r\n      } else {\r\n        return a == b.name\r\n      }\r\n\r\n    case 'is not':\r\n      if (hasNumber.test()) {\r\n        return a != b.name.concat(b.octave)\r\n      } else {\r\n        return a != b.name\r\n      }\r\n  }\r\n}",m=n("c62b"),p=n.n(m),d=n("2ef0"),b=n("7724"),h=n.n(b),y=i.a.Theme.defineTheme("midiblocks",{blockStyles:{logic_blocks:{colourPrimary:"#5d37f0",colourSecondary:"#635697",colourTertiary:"#453974"},loop_blocks:{colourPrimary:"#2ca300",colourSecondary:"#328514",colourTertiary:"#2d621a"},math_blocks:{colourPrimary:"#a599e9",colourSecondary:"#7e77a9",colourTertiary:"#575467"},procedure_blocks:{colourPrimary:"#ff628c",colourSecondary:"#b56278",colourTertiary:"#6e3c49"},variable_blocks:{colourPrimary:"#ff628c",colourSecondary:"#b56278",colourTertiary:"#6e3c49"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}}}),g=n("3e52"),f={name:"Blockly",props:["options","toolbox","blocks","inline"],computed:s()({},Object(c["b"])(["devices"])),data(){return{blockly:null,interpreter:null,isFlyoutOpen:!1,blockBeingDragged:!1,lastClickedCategory:null,isMouseInQuasarToolbox:!1}},mounted(){let t=this.$props.options||{};t=Object(d["defaults"])(this.$props.options,{renderer:"zelos",sounds:!1,toolbox:this.$refs.toolbox,media:"media/",zoom:{controls:!0,pinch:!0,wheel:!0,startScale:.8},grid:{spacing:50,length:50,colour:"#9effff",snap:!0},theme:y}),this.blockly=i.a.inject(this.$refs.blockly,t),this.blockly.addChangeListener(this.onChange),this.$root.$on("blockly.prompt.submit",this.onPromptSubmit),this.addBlocks()},beforeDestroy(){this.$root.$off("blockly.prompt.submit",this.onPromptSubmit)},methods:{onChange(t){this.$emit("change",t),"dragStart"===t.element?this.blockBeingDragged=t:"dragStop"===t.element&&(this.isMouseInQuasarToolbox&&this.blockly.getBlockById(t.blockId).dispose(),this.blockBeingDragged=!1)},toggleToolboxFlyout(t,e){if(this.isFlyoutOpen===t.name)return this.blockly.getFlyout().hide(),this.isFlyoutOpen=null,void(this.lastClickedCategory=null);let n=[];t.custom?this.blockly.getFlyout().show(t.custom):(t.children.forEach(t=>{n.push(document.querySelector(`block[type="${t.type}"]`))}),this.blockly.getFlyout().show(n)),this.isFlyoutOpen=t.name,this.lastClickedCategory=e.target},onPromptSubmit(t){this.lastClickedCategory&&this.lastClickedCategory.click()},closeToolboxFLyout(t){let e=t.path.some(t=>t.classList&&t.classList.contains("blocklyFlyoutBackground"));this.isFlyoutOpen&&!e&&(this.blockly.getFlyout().hide(),this.isFlyoutOpen=!1)},run(){const t=i.a.JavaScript.workspaceToCode(this.blockly);this.interpreter=new h.a(g["transform"](u+"\n"+t,{presets:["env"],sourceType:"script"}).code,this.setupInterpreter),this.interpreter.run()},setupInterpreter(t,e){t.setProperty(e,"log",t.createNativeFunction(t=>{console.log("ðŸ“¦ log: ",...JSON.parse(t))})),t.setProperty(e,"_playNote",t.createNativeFunction(t=>{let e=JSON.parse(t);"all"===e.device&&Object.keys(this.devices.outputs).forEach(t=>{const n=p.a.getOutputById(t);n.playNote(e.note,e.channel)})}))},addBlocks(){this.blocks.forEach(t=>{i.a.Blocks[t.name]={init:function(){this.jsonInit(t.json)}},i.a.JavaScript[t.name]=()=>"";const e=this.blockly.newBlock(t.name);e.initSvg(),e.render(),this.blockly.centerOnBlock(e.id),this.blockly.scroll(this.blockly.scrollX,this.blockly.scrollY)})}}},k=f,v=(n("8f13"),n("2877")),_=n("1c1c"),C=n("eb85"),S=n("66e5"),x=n("4074"),F=n("0016"),N=n("0170"),T=n("eebe"),w=n.n(T),O=Object(v["a"])(k,o,r,!1,null,null,null);e["a"]=O.exports;w()(O,"components",{QList:_["a"],QSeparator:C["a"],QItem:S["a"],QItemSection:x["a"],QIcon:F["a"],QItemLabel:N["a"]})},"730a":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"full-height"},[n("section",{staticClass:"content"},[n("h1",[t._v("Library")]),t.post.isChecking?n("div",{staticClass:"center-children"},[n("q-spinner",{attrs:{color:"primary",size:"5em"}})],1):n("div",{domProps:{innerHTML:t._s(t.post.content)}}),n("LibraryGrid")],1)])},r=[],a=n("ded3"),s=n.n(a),l=n("8771"),i=n("2f62"),c={name:"LibraryHome",components:{LibraryGrid:l["a"]},computed:s()({},Object(i["b"])(["post"])),mounted(){}},u=c,m=n("2877"),p=n("9989"),d=n("0d59"),b=n("eebe"),h=n.n(b),y=Object(m["a"])(u,o,r,!1,null,null,null);e["default"]=y.exports;h()(y,"components",{QPage:p["a"],QSpinner:d["a"]})},8771:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row q-col-gutter-md"},t._l(t.blocks,(function(e){return n("div",{key:e.name,staticClass:"col-12 col-sm-6 col-lg-4"},[n("q-card",[n("q-card-section",[n("Workspace",{attrs:{options:t.options,blocks:[e],inline:!0,toolbox:t.toolbox}})],1),n("q-separator"),n("q-card-section",[n("h3",[t._v(t._s(e.name))]),n("p",[t._v(t._s(e.json.tooltip))])]),n("q-card-actions",{attrs:{align:"right"}},[t._t("default",null,{block:e})],2)],1)],1)})),0)},r=[],a=n("00d3"),s=n("8ded"),l=n.n(s),i={name:"LibraryGrid",components:{Workspace:a["a"]},computed:{toolbox(){let t=[];return Object.keys(this.blocks).forEach(e=>{t.push({tag:"category",name:"Readonly",colour:"#fff",children:[{tag:"block",type:this.blocks[e].category}]})}),t}},data(){return{blocks:l.a.get("blocks"),options:{trashcan:!1,zoom:{controls:!1,pinch:!0,wheel:!0,startScale:.75}}}}},c=i,u=n("2877"),m=n("f09f"),p=n("a370"),d=n("eb85"),b=n("4b7e"),h=n("eebe"),y=n.n(h),g=Object(u["a"])(c,o,r,!1,null,null,null);e["a"]=g.exports;y()(g,"components",{QCard:m["a"],QCardSection:p["a"],QSeparator:d["a"],QCardActions:b["a"]})},"8f13":function(t,e,n){"use strict";var o=n("c80c"),r=n.n(o);r.a},c80c:function(t,e,n){}}]);